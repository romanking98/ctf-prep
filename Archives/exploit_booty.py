#!/usr/bin/python
from pwn import *

p = process("./booty")
raw_input()

context.timeout = 6
exhausted = "exhausted"
tense = "tense"
flex = "flex"
p.timeout = 6
def read_action():
	text = p.recvuntil("Choose an action")
	search = "YOU WIN ::"
	act = text.split("\n")
	i = 0
	for i in range(len(act)):
		if(exhausted in act[i] or tense in act[i] or flex in act[i]):
			break;
	leak = act[i]
	return leak

def push():
	p.sendline("p")

def rest():
	p.sendline("r")

def hold():
	p.sendline("h")

print p.recv()
name = "A"*20
p.sendline(name)

#Beat Beer Wench
raw_input("Entering loop 1 now")
x_s = "X"
while True:
	leak = read_action()
	print leak
	if(leak == x_s):
		break
	elif exhausted in leak:
		push()
	elif tense in leak:
		rest()
	elif flex in leak:
		hold()
	else:
		print "Beaten everybody, I guess!!"
		break
leak = p.recv()
leak = leak.split("\n")
treasure = "treasure"
i = 0
for i in range(len(leak)):
	if treasure in leak[i]:
		break
print leak[i]
p.interactive()